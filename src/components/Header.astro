---
import { Image } from "astro:assets";
import logo from "../assets/images/logo.svg";
import søg from "../assets/images/søg.svg";
import kurv from "../assets/images/kurv.svg";
import Banner from "../components/Banner.astro";
---

<Banner />
<div
  class="relative bg-[#F9F6F1] py-4 px-6 flex items-center justify-center md:justify-between z-20"
>
  <!-- Burger Menu ikon -->
  <button
    id="burgerBtn"
    aria-label="Burger Menu"
    class="md:hidden flex flex-col space-y-1 cursor-pointer absolute left-6 top-1/2 -translate-y-1/2 w-6 h-6 z-30"
  >
    <span
      class="block w-6 h-[2px] bg-[#2B2B2B] transition-all duration-300 ease-in-out origin-center"
    ></span>
    <span
      class="block w-6 h-[2px] bg-[#2B2B2B] transition-all duration-300 ease-in-out"
    ></span>
    <span
      class="block w-6 h-[2px] bg-[#2B2B2B] transition-all duration-300 ease-in-out origin-center"
    ></span>
  </button>

  <!-- Logo -->
  <a href="/" class="z-20">
    <Image src={logo} alt="Kaffevaerk logo" class="h-[60px] w-[60px]" />
  </a>

  <!-- Desktop navigation -->
  <nav
    class="hidden md:flex absolute left-1/2 -translate-x-1/2 space-x-10 z-20"
  >
    <a href="/shop" class="manrope font-semibold">Shop</a>
    <a href="/omos" class="manrope font-semibold">Om os</a>
    <a href="/kontakt" class="manrope font-semibold">Kontakt</a>
    <a href="/faq" class="manrope font-semibold">FAQ</a>
  </nav>

  <!-- Ikoner -->
  <div class="flex space-x-4 absolute right-6 top-1/2 -translate-y-1/2 z-20">
    <Image src={søg} alt="Søg ikon" class="h-[25px] w-[25px]" />
    <Image src={kurv} alt="Kurv ikon" class="h-[25px] w-[25px]" />
  </div>
</div>

<!-- Burger menu dropdown -->
<nav
  id="burgerMenu"
  class="fixed top-0 left-0 w-screen h-screen bg-[#F9F6F1] opacity-0 invisible flex flex-col justify-center items-center transition-opacity duration-300 ease-in-out md:hidden z-15"
>
  <ul class="flex flex-col space-y-6 text-center text-xl">
    <li>
      <a href="/shop" class="hover:underline manrope font-semibold">Shop</a>
    </li>
    <li>
      <a href="/omos" class="hover:underline manrope font-semibold">Om os</a>
    </li>
    <li>
      <a href="/kontakt" class="hover:underline manrope font-semibold"
        >Kontakt</a
      >
    </li>
    <li>
      <a href="/faq" class="hover:underline manrope font-semibold">FAQ</a>
    </li>
  </ul>
</nav>

<script>
  const burgerBtn = document.getElementById("burgerBtn");
  const burgerMenu = document.getElementById("burgerMenu");

  burgerBtn.addEventListener("click", () => {
    const isOpen = burgerMenu.classList.contains("open");

    if (isOpen) {
      burgerMenu.classList.remove("open");
      burgerBtn.classList.remove("open");
      burgerMenu.style.pointerEvents = "none"; // deaktiver klik når skjult
    } else {
      burgerMenu.classList.add("open");
      burgerBtn.classList.add("open");
      burgerMenu.style.pointerEvents = "auto"; // aktiver klik når vist
    }
  });

  // Sæt pointer-events initialt, skjult menu ikke klikbar
  burgerMenu.style.pointerEvents = "none";
</script>

<style>
  /* Burger ikon animation */
  #burgerBtn.open span:nth-child(1) {
    transform: rotate(45deg) translate(5px, 5px);
  }
  #burgerBtn.open span:nth-child(2) {
    opacity: 0;
  }
  #burgerBtn.open span:nth-child(3) {
    transform: rotate(-45deg) translate(5px, -5px);
  }

  /* Vis/skjul menu via opacity + visibility */
  nav#burgerMenu {
    transition-property: opacity, visibility;
  }

  nav#burgerMenu.open {
    opacity: 1;
    visibility: visible;
  }
</style>
