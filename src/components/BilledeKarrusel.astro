---
// Importér billeder
import { Image } from "astro:assets";
import bønner from "../assets/images/bønner.webp";
import bryg from "../assets/images/bryg.webp";
import risteri from "../assets/images/risteri.webp";

// Liste over billeder
const slides = [bønner, bryg, risteri];
---

<section class="relative overflow-hidden my-10 px-4 md:px-6">
  <div
    id="carousel"
    class="flex transition-transform duration-500 ease-in-out w-[300%]"
  >
    {
      slides.map((img) => (
        <div class="w-full md:w-1/3 flex-shrink-0">
          <Image src={img} alt="" class="w-full h-full object-cover" />
        </div>
      ))
    }
  </div>

  <!-- Navigation -->
  <button
    id="prevBtn"
    class="absolute left-2 top-1/2 -translate-y-1/2 bg-black/30 text-white px-3 py-1 z-10"
  >
    ‹
  </button>
  <button
    id="nextBtn"
    class="absolute right-2 top-1/2 -translate-y-1/2 bg-black/30 text-white px-3 py-1 z-10"
  >
    ›
  </button>

  <script type="module">
    document.addEventListener("DOMContentLoaded", () => {
      const carousel = document.getElementById("carousel");
      const nextBtn = document.getElementById("nextBtn");
      const prevBtn = document.getElementById("prevBtn");

      let index = 0;
      const totalSlides = 3;

      function updateCarousel() {
        const percentage = -(index * 100);
        carousel.style.transform = `translateX(${percentage}%)`;
      }

      nextBtn?.addEventListener("click", () => {
        index = (index + 1) % totalSlides;
        updateCarousel();
      });

      prevBtn?.addEventListener("click", () => {
        index = (index - 1 + totalSlides) % totalSlides;
        updateCarousel();
      });

      setInterval(() => {
        index = (index + 1) % totalSlides;
        updateCarousel();
      }, 5000);
    });
  </script>
</section>
